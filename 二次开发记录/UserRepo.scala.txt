  actor-persist\src\main\scala\im\actor\server\persist\UserRepo.scala
  
   /**
   * 按照Id查询昵称  by Lining 2016-6-22
   * @param id
   * @return
   */
  def nicknameById(id: Rep[Int]) = byId(id) map (_.nickname)
  
  //二次开发记录：添加的新方法  by Lining
  def byName(name: Rep[String]) = users filter (_.name.toLowerCase === name.toLowerCase)

  //二次开发记录：添加的新方法  by Lining
  val byNameC = Compiled(byName _)

  //二次开发记录：添加的新方法  by Lining
  def findByName(query: String) = {
    val name =
      if (query.startsWith("@")) query.drop(1) else query
    byNameC(name).result.headOption
  }

  //二次开发记录：添加的新方法  by Lining
  def nameExists(name: String) =
    users.filter(_.name.toLowerCase === name.toLowerCase).exists.result
    
  /**
   * 查询昵称  by Lining 2016-6-22
   * @param id
   * @return
   */
  def findNickname(id: Int) =
    nicknameById(id).result.headOption    